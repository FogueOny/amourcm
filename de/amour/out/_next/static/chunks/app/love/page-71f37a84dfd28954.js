(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[519],{122:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>M});var a=i(5155),n=i(2115),s=i(8999),r=i(8274),l=i(1976);let o=(0,i(2895).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var c=i(6874),d=i.n(c),u=i(3168),m=i(869),p=i(2885),h=i(7494),x=i(845),f=i(7351),y=i(1508);class g extends n.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,i=(0,f.s)(e)&&e.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function j(e){let{children:t,isPresent:i,anchorX:s,root:r}=e,l=(0,n.useId)(),o=(0,n.useRef)(null),c=(0,n.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=(0,n.useContext)(y.Q);return(0,n.useInsertionEffect)(()=>{let{width:e,height:t,top:a,left:n,right:u}=c.current;if(i||!o.current||!e||!t)return;o.current.dataset.motionPopId=l;let m=document.createElement("style");d&&(m.nonce=d);let p=null!=r?r:document.head;return p.appendChild(m),m.sheet&&m.sheet.insertRule('\n          [data-motion-pop-id="'.concat(l,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===s?"left: ".concat(n):"right: ".concat(u),"px !important;\n            top: ").concat(a,"px !important;\n          }\n        ")),()=>{p.contains(m)&&p.removeChild(m)}},[i]),(0,a.jsx)(g,{isPresent:i,childRef:o,sizeRef:c,children:n.cloneElement(t,{ref:o})})}let v=e=>{let{children:t,initial:i,isPresent:s,onExitComplete:r,custom:l,presenceAffectsLayout:o,mode:c,anchorX:d,root:u}=e,m=(0,p.M)(b),h=(0,n.useId)(),f=!0,y=(0,n.useMemo)(()=>(f=!1,{id:h,initial:i,isPresent:s,custom:l,onExitComplete:e=>{for(let t of(m.set(e,!0),m.values()))if(!t)return;r&&r()},register:e=>(m.set(e,!1),()=>m.delete(e))}),[s,m,r]);return o&&f&&(y={...y}),(0,n.useMemo)(()=>{m.forEach((e,t)=>m.set(t,!1))},[s]),n.useEffect(()=>{s||m.size||!r||r()},[s]),"popLayout"===c&&(t=(0,a.jsx)(j,{isPresent:s,anchorX:d,root:u,children:t})),(0,a.jsx)(x.t.Provider,{value:y,children:t})};function b(){return new Map}var N=i(2082);let w=e=>e.key||"";function k(e){let t=[];return n.Children.forEach(e,e=>{(0,n.isValidElement)(e)&&t.push(e)}),t}let P=e=>{let{children:t,custom:i,initial:s=!0,onExitComplete:r,presenceAffectsLayout:l=!0,mode:o="sync",propagate:c=!1,anchorX:d="left",root:u}=e,[x,f]=(0,N.xQ)(c),y=(0,n.useMemo)(()=>k(t),[t]),g=c&&!x?[]:y.map(w),j=(0,n.useRef)(!0),b=(0,n.useRef)(y),P=(0,p.M)(()=>new Map),[I,C]=(0,n.useState)(y),[M,E]=(0,n.useState)(y);(0,h.E)(()=>{j.current=!1,b.current=y;for(let e=0;e<M.length;e++){let t=w(M[e]);g.includes(t)?P.delete(t):!0!==P.get(t)&&P.set(t,!1)}},[M,g.length,g.join("-")]);let A=[];if(y!==I){let e=[...y];for(let t=0;t<M.length;t++){let i=M[t],a=w(i);g.includes(a)||(e.splice(t,0,i),A.push(i))}return"wait"===o&&A.length&&(e=A),E(k(e)),C(y),null}let{forceRender:z}=(0,n.useContext)(m.L);return(0,a.jsx)(a.Fragment,{children:M.map(e=>{let t=w(e),n=(!c||!!x)&&(y===M||g.includes(t));return(0,a.jsx)(v,{isPresent:n,initial:(!j.current||!!s)&&void 0,custom:i,presenceAffectsLayout:l,mode:o,root:u,onExitComplete:n?void 0:()=>{if(!P.has(t))return;P.set(t,!0);let e=!0;P.forEach(t=>{t||(e=!1)}),e&&(null==z||z(),E(b.current),c&&(null==f||f()),r&&r())},anchorX:d,children:e},t)})})};function I(e){let{recipientName:t,loveMessage:i}=e,[s,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!1),u=Array.from({length:20},(e,t)=>(0,a.jsx)(r.P.div,{initial:{opacity:0,y:-20,x:Math.random()*window.innerWidth,rotate:360*Math.random()},animate:{opacity:[0,1,0],y:window.innerHeight+100,rotate:360*Math.random()+180},transition:{duration:3,delay:.5*Math.random(),ease:"easeOut"},className:"fixed pointer-events-none z-10",children:(0,a.jsx)(l.A,{className:"w-6 h-6 text-pink-400 fill-current"})},t));return(0,a.jsxs)("div",{className:"min-h-screen flex items-center justify-center p-4",children:[(0,a.jsx)(P,{children:c&&u}),(0,a.jsx)("div",{className:"w-full max-w-md",children:(0,a.jsx)(P,{mode:"wait",children:s?(0,a.jsx)(r.P.div,{initial:{opacity:0,scale:.8,rotateY:-90},animate:{opacity:1,scale:1,rotateY:0},transition:{duration:.8,type:"spring",stiffness:100},className:"bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl p-8 border border-pink-100",children:(0,a.jsxs)(r.P.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.3,duration:.6},className:"text-center",children:[(0,a.jsx)(r.P.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.5,type:"spring",stiffness:200},className:"inline-flex items-center justify-center w-16 h-16 bg-pink-100 rounded-full mb-6",children:(0,a.jsx)(l.A,{className:"w-8 h-8 text-pink-500 fill-current"})}),(0,a.jsxs)(r.P.h1,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.7,duration:.6},className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-pink-700 mb-8 font-dancing-script",style:{fontFamily:"var(--font-dancing-script)"},children:["Ma ch\xe8re ",t]}),(0,a.jsx)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9,duration:.6},className:"bg-gradient-to-br from-pink-50 to-white rounded-2xl p-6 border border-pink-100 shadow-inner",children:(0,a.jsx)("p",{className:"text-gray-700 text-lg leading-relaxed whitespace-pre-wrap",children:i})}),(0,a.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2,duration:.6},className:"mt-8 flex justify-center",children:(0,a.jsx)("div",{className:"flex space-x-2",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)(r.P.div,{animate:{scale:[1,1.2,1],rotate:[0,10,0]},transition:{delay:.1*t,duration:.8,repeat:1/0,repeatDelay:3},children:(0,a.jsx)(l.A,{className:"w-6 h-6 text-pink-400 fill-current"})},t))})}),(0,a.jsx)(r.P.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.4,duration:.6},className:"text-pink-600 text-sm mt-6 font-medium",children:"\uD83D\uDC95 Avec tout mon amour \uD83D\uDC95"})]})},"message"):(0,a.jsxs)(r.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.6},className:"text-center",children:[(0,a.jsx)(r.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{s||(o(!0),d(!0),setTimeout(()=>d(!1),3e3))},className:"cursor-pointer mx-auto mb-8",animate:{y:[0,-10,0],rotateY:[0,5,0,-5,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:(0,a.jsx)("div",{className:"relative w-64 h-40 mx-auto",children:(0,a.jsxs)("div",{className:"absolute inset-0 bg-gradient-to-br from-pink-200 to-pink-300 rounded-lg shadow-2xl",children:[(0,a.jsx)("div",{className:"absolute top-0 left-0 right-0 h-20 bg-gradient-to-br from-pink-300 to-pink-400 rounded-t-lg overflow-hidden",children:(0,a.jsx)("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-32 border-r-32 border-t-20 border-l-transparent border-r-transparent border-t-pink-400"})}),(0,a.jsx)(r.P.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:(0,a.jsx)(l.A,{className:"w-12 h-12 text-pink-600 fill-current drop-shadow-lg"})})]})})}),(0,a.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.6},className:"text-center",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:["Un message vous attend, ",t," \uD83D\uDC95"]}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Cliquez sur l'enveloppe pour d\xe9couvrir votre surprise"}),(0,a.jsx)(r.P.div,{animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},className:"text-pink-400 text-sm",children:"✨ Touchez l'enveloppe ✨"})]})]},"envelope")})})]})}function C(){let e=(0,s.useSearchParams)().get("id"),[t,i]=(0,n.useState)(null),[c,m]=(0,n.useState)(!0),[p,h]=(0,n.useState)(null);return((0,n.useEffect)(()=>{(async()=>{if(!e){h("Aucun identifiant de message fourni"),m(!1);return}try{let{data:t,error:a}=await u.N.from("messages").select("*").eq("id",e).single();if(a)throw a;t?i(t):h("Message non trouv\xe9")}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration:",e),h("Ce message d'amour n'existe pas ou a expir\xe9")}finally{m(!1)}})()},[e]),c)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)(r.P.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center",children:[(0,a.jsx)(r.P.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"inline-block mb-4",children:(0,a.jsx)(l.A,{className:"w-12 h-12 text-pink-500 fill-current"})}),(0,a.jsx)("p",{className:"text-gray-600 text-lg",children:"Pr\xe9paration de votre message d'amour..."})]})}):p||!t?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,a.jsx)(r.P.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center max-w-md",children:(0,a.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-3xl shadow-2xl p-8 border border-red-100",children:[(0,a.jsx)("div",{className:"text-red-400 mb-4",children:(0,a.jsx)(l.A,{className:"w-16 h-16 mx-auto opacity-50"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Oups ! Message introuvable"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:p||"Ce message d'amour n'existe pas ou a \xe9t\xe9 supprim\xe9."}),(0,a.jsx)(d(),{href:"/create",children:(0,a.jsxs)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-pink-400 to-pink-600 text-white font-semibold rounded-xl hover:from-pink-500 hover:to-pink-700 transition-all duration-200 shadow-lg",children:[(0,a.jsx)(o,{className:"w-4 h-4 mr-2"}),"Cr\xe9er un nouveau message"]})})]})})}):(0,a.jsx)(I,{recipientName:t.recipient_name,loveMessage:t.love_message})}function M(){return(0,a.jsx)(n.Suspense,{fallback:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)(r.P.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center",children:[(0,a.jsx)(r.P.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"inline-block mb-4",children:(0,a.jsx)(l.A,{className:"w-12 h-12 text-pink-500 fill-current"})}),(0,a.jsx)("p",{className:"text-gray-600 text-lg",children:"Chargement de votre message d'amour..."})]})}),children:(0,a.jsx)(C,{})})}},3168:(e,t,i)=>{"use strict";i.d(t,{N:()=>a});let a=(0,i(5647).UU)("https://utscyqrkxqpuzceggowa.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV0c2N5cXJreHFwdXpjZWdnb3dhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQwNTE0NjcsImV4cCI6MjA2OTYyNzQ2N30.2xK7yqHZVPB8ZzI878KIIZLyfB3IFUaVfgLk5Z6hlDM")},5042:(e,t,i)=>{Promise.resolve().then(i.bind(i,122))}},e=>{e.O(0,[821,647,874,441,964,358],()=>e(e.s=5042)),_N_E=e.O()}]);